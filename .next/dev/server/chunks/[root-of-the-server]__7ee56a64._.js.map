{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ishaa/OneDrive/Documents/Coding/Programs/Web%20Devlopement/Bitlinks/Bitlinks%20github/lib/mongodb.js"],"sourcesContent":["import { MongoClient } from \"mongodb\";\r\n\r\nconst uri = process.env.MONGODB_URI;\r\nif (!uri) {\r\n  throw new Error(\"❌ MONGODB_URI is not defined in environment variables\");\r\n}\r\n\r\nlet client;\r\nlet clientPromise;\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n  if (!global._mongoClientPromise) {\r\n    client = new MongoClient(uri);\r\n    global._mongoClientPromise = client.connect();\r\n  }\r\n  clientPromise = global._mongoClientPromise;\r\n} else {\r\n  // ✅ Cache DB connection for production too\r\n  if (!global._mongoClientPromise) {\r\n    client = new MongoClient(uri);\r\n    global._mongoClientPromise = client.connect();\r\n  }\r\n  clientPromise = global._mongoClientPromise;\r\n}\r\n\r\nexport default clientPromise;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW;AACnC,IAAI,CAAC,KAAK;IACR,MAAM,IAAI,MAAM;AAClB;AAEA,IAAI;AACJ,IAAI;AAEJ,wCAA4C;IAC1C,IAAI,CAAC,yDAAO,mBAAmB,EAAE;QAC/B,SAAS,IAAI,sHAAW,CAAC;QACzB,yDAAO,mBAAmB,GAAG,OAAO,OAAO;IAC7C;IACA,gBAAgB,yDAAO,mBAAmB;AAC5C;;uCASe","debugId":null}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ishaa/OneDrive/Documents/Coding/Programs/Web%20Devlopement/Bitlinks/Bitlinks%20github/app/api/generate/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport clientPromise from \"@/lib/mongodb\";\r\n\r\nexport async function POST(req) {\r\n  try {\r\n    const { url, shortcut } = await req.json();\r\n\r\n    if (!url || !shortcut) {\r\n      return NextResponse.json({\r\n        success: false,\r\n        message: \"Please provide both URL and shortcut.\"\r\n      });\r\n    }\r\n\r\n    const client = await clientPromise;\r\n    const db = client.db(\"bitlinks\");\r\n    const collection = db.collection(\"url\");\r\n\r\n    // Check if shortcut already exists\r\n    const existing = await collection.findOne({ shortcut });\r\n\r\n    if (existing) {\r\n      return NextResponse.json({\r\n        success: false,\r\n        message: \"This shortcut is already taken. Try another one!\"\r\n      });\r\n    }\r\n\r\n    // Insert new entry\r\n    await collection.insertOne({\r\n      url,\r\n      shortcut,\r\n      createdAt: new Date()\r\n    });\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      message: \"Short URL created successfully!\",\r\n      shortUrl: shortcut\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error(\"Error generating short URL:\", error);\r\n    return NextResponse.json({\r\n      success: false,\r\n      message: \"Something went wrong on our end.\"\r\n    });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,GAAG;IAC5B,IAAI;QACF,MAAM,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,MAAM,IAAI,IAAI;QAExC,IAAI,CAAC,OAAO,CAAC,UAAU;YACrB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,SAAS;YACX;QACF;QAEA,MAAM,SAAS,MAAM,2HAAa;QAClC,MAAM,KAAK,OAAO,EAAE,CAAC;QACrB,MAAM,aAAa,GAAG,UAAU,CAAC;QAEjC,mCAAmC;QACnC,MAAM,WAAW,MAAM,WAAW,OAAO,CAAC;YAAE;QAAS;QAErD,IAAI,UAAU;YACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,SAAS;YACX;QACF;QAEA,mBAAmB;QACnB,MAAM,WAAW,SAAS,CAAC;YACzB;YACA;YACA,WAAW,IAAI;QACjB;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;YACT,UAAU;QACZ;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IACF;AACF","debugId":null}}]
}