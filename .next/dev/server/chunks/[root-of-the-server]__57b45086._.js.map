{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ishaa/OneDrive/Documents/Coding/Programs/Web%20Devlopement/Bitlinks/Bitlinks%20github/lib/mongodb.js"],"sourcesContent":["import { MongoClient } from \"mongodb\";\r\n\r\nconst uri = process.env.MONGODB_URI;\r\nif (!uri) {\r\n  throw new Error(\"❌ MONGODB_URI is not defined in environment variables\");\r\n}\r\n\r\nlet client;\r\nlet clientPromise;\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n  if (!global._mongoClientPromise) {\r\n    client = new MongoClient(uri);\r\n    global._mongoClientPromise = client.connect();\r\n  }\r\n  clientPromise = global._mongoClientPromise;\r\n} else {\r\n  // ✅ Cache DB connection for production too\r\n  if (!global._mongoClientPromise) {\r\n    client = new MongoClient(uri);\r\n    global._mongoClientPromise = client.connect();\r\n  }\r\n  clientPromise = global._mongoClientPromise;\r\n}\r\n\r\nexport default clientPromise;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW;AACnC,IAAI,CAAC,KAAK;IACR,MAAM,IAAI,MAAM;AAClB;AAEA,IAAI;AACJ,IAAI;AAEJ,wCAA4C;IAC1C,IAAI,CAAC,yDAAO,mBAAmB,EAAE;QAC/B,SAAS,IAAI,sHAAW,CAAC;QACzB,yDAAO,mBAAmB,GAAG,OAAO,OAAO;IAC7C;IACA,gBAAgB,yDAAO,mBAAmB;AAC5C;;uCASe","debugId":null}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ishaa/OneDrive/Documents/Coding/Programs/Web%20Devlopement/Bitlinks/Bitlinks%20github/app/api/generate/route.js"],"sourcesContent":["import clientPromise from \"@/lib/mongodb\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\nconst allowedOrigin = process.env.NEXT_PUBLIC_HOST;\r\n\r\nexport async function POST(request) {\r\n  try {\r\n    const body = await request.json();\r\n    const client = await clientPromise;\r\n    const db = client.db(\"bitlinks\");\r\n    const collection = db.collection(\"url\");\r\n\r\n    const existing = await collection.findOne({ shortcut: body.shortcut });\r\n\r\n    if (existing) {\r\n      return NextResponse.json(\r\n        { message: \"URL already exists!\", success: false, error: true },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    await collection.insertOne({\r\n      url: body.url,\r\n      shortcut: body.shortcut,\r\n    });\r\n\r\n    return NextResponse.json(\r\n      { message: \"URL generated successfully!\", success: true, error: false },\r\n      {\r\n        headers: {\r\n          \"Access-Control-Allow-Origin\": allowedOrigin,\r\n        },\r\n      }\r\n    );\r\n  } catch (error) {\r\n    console.error(\"❌ Error in /api/generate:\", error);\r\n    return NextResponse.json(\r\n      { message: \"Internal server error\", error: true },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n// CORS Preflight\r\nexport function OPTIONS() {\r\n  return NextResponse.json(\r\n    {},\r\n    {\r\n      headers: {\r\n        \"Access-Control-Allow-Origin\": allowedOrigin,\r\n        \"Access-Control-Allow-Methods\": \"GET, POST, PUT, DELETE, OPTIONS\",\r\n        \"Access-Control-Allow-Headers\": \"Content-Type, Authorization\",\r\n      },\r\n    }\r\n  );\r\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEA,MAAM;AAEC,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,SAAS,MAAM,2HAAa;QAClC,MAAM,KAAK,OAAO,EAAE,CAAC;QACrB,MAAM,aAAa,GAAG,UAAU,CAAC;QAEjC,MAAM,WAAW,MAAM,WAAW,OAAO,CAAC;YAAE,UAAU,KAAK,QAAQ;QAAC;QAEpE,IAAI,UAAU;YACZ,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAuB,SAAS;gBAAO,OAAO;YAAK,GAC9D;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,WAAW,SAAS,CAAC;YACzB,KAAK,KAAK,GAAG;YACb,UAAU,KAAK,QAAQ;QACzB;QAEA,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAA+B,SAAS;YAAM,OAAO;QAAM,GACtE;YACE,SAAS;gBACP,+BAA+B;YACjC;QACF;IAEJ,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAyB,OAAO;QAAK,GAChD;YAAE,QAAQ;QAAI;IAElB;AACF;AAGO,SAAS;IACd,OAAO,gJAAY,CAAC,IAAI,CACtB,CAAC,GACD;QACE,SAAS;YACP,+BAA+B;YAC/B,gCAAgC;YAChC,gCAAgC;QAClC;IACF;AAEJ","debugId":null}}]
}